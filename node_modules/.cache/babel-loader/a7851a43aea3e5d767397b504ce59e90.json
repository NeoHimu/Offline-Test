{"remainingRequest":"/home/himanshu/Desktop/RA_Work/FOSSEE/prabhu_sir/vue/VueTodo/node_modules/babel-loader/lib/index.js!/home/himanshu/Desktop/RA_Work/FOSSEE/prabhu_sir/vue/VueTodo/node_modules/eslint-loader/index.js??ref--13-0!/home/himanshu/Desktop/RA_Work/FOSSEE/prabhu_sir/vue/VueTodo/src/store.js","dependencies":[{"path":"/home/himanshu/Desktop/RA_Work/FOSSEE/prabhu_sir/vue/VueTodo/src/store.js","mtime":1556179462840},{"path":"/home/himanshu/Desktop/RA_Work/FOSSEE/prabhu_sir/vue/VueTodo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/himanshu/Desktop/RA_Work/FOSSEE/prabhu_sir/vue/VueTodo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/himanshu/Desktop/RA_Work/FOSSEE/prabhu_sir/vue/VueTodo/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Promise from \"/home/himanshu/Desktop/RA_Work/FOSSEE/prabhu_sir/vue/VueTodo/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/himanshu/Desktop/RA_Work/FOSSEE/prabhu_sir/vue/VueTodo/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/web.dom.iterable\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport ls from './api/localStorageService';\nimport idbs from './api/indexedDBService';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    todos: [],\n    completed: [],\n    dataFields: ['todos', 'completed']\n  },\n  mutations: {\n    setState: function setState(state, _ref) {\n      var field = _ref.field,\n          data = _ref.data;\n      Vue.set(state, field, data);\n    },\n    addTodo: function addTodo(state, newTodo) {\n      state.todos.push(newTodo);\n    },\n    deleteTodo: function deleteTodo(state, _ref2) {\n      var todoIndex = _ref2.todoIndex,\n          isCompleted = _ref2.isCompleted;\n\n      if (isCompleted) {\n        state.completed.splice(todoIndex, 1);\n      } else {\n        state.todos.splice(todoIndex, 1);\n      }\n    },\n    completeTodo: function completeTodo(state, todoIndex) {\n      state.completed.push(state.todos.splice(todoIndex, 1)[0]);\n    }\n  },\n  actions: {\n    addTodo: function addTodo(_ref3, newTodo) {\n      var commit = _ref3.commit,\n          dispatch = _ref3.dispatch;\n      commit('addTodo', newTodo);\n      dispatch('saveTodos');\n    },\n    deleteTodo: function deleteTodo(_ref4, todoInfo) {\n      var commit = _ref4.commit,\n          dispatch = _ref4.dispatch;\n      commit('deleteTodo', todoInfo);\n      dispatch('saveTodos');\n    },\n    completeTodo: function completeTodo(_ref5, todoIndex) {\n      var commit = _ref5.commit,\n          dispatch = _ref5.dispatch;\n      commit('completeTodo', todoIndex);\n      dispatch('saveTodos');\n    },\n    checkStorage: function checkStorage(_ref6) {\n      var state = _ref6.state,\n          commit = _ref6.commit;\n      state.dataFields.forEach(\n      /*#__PURE__*/\n      function () {\n        var _ref7 = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee(field) {\n          var data;\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.prev = 0;\n                  _context.next = 3;\n                  return idbs.checkStorage(field);\n\n                case 3:\n                  data = _context.sent;\n                  // IndexedDB did not find the data, try localStorage\n                  if (data === undefined) data = ls.checkStorage(field); // LocalStorage did not find the data, reset it\n\n                  if (data === null) data = [];\n                  commit('setState', {\n                    field: field,\n                    data: data\n                  });\n                  _context.next = 12;\n                  break;\n\n                case 9:\n                  _context.prev = 9;\n                  _context.t0 = _context[\"catch\"](0);\n                  // The value in storage was invalid or corrupt so just set it to blank\n                  commit('setState', {\n                    field: field,\n                    data: []\n                  });\n\n                case 12:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this, [[0, 9]]);\n        }));\n\n        return function (_x) {\n          return _ref7.apply(this, arguments);\n        };\n      }());\n    },\n    saveTodos: function () {\n      var _saveTodos = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(_ref8) {\n        var state;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                state = _ref8.state;\n                _context2.prev = 1;\n                _context2.next = 4;\n                return _Promise.all(state.dataFields.map(function (field) {\n                  return idbs.saveToStorage(field, state[field]);\n                }));\n\n              case 4:\n                _context2.next = 9;\n                break;\n\n              case 6:\n                _context2.prev = 6;\n                _context2.t0 = _context2[\"catch\"](1);\n                state.dataFields.forEach(function (field) {\n                  return ls.saveToStorage(field, state[field]);\n                });\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[1, 6]]);\n      }));\n\n      function saveTodos(_x2) {\n        return _saveTodos.apply(this, arguments);\n      }\n\n      return saveTodos;\n    }()\n  }\n});",{"version":3,"sources":["/home/himanshu/Desktop/RA_Work/FOSSEE/prabhu_sir/vue/VueTodo/src/store.js"],"names":["Vue","Vuex","ls","idbs","use","Store","state","todos","completed","dataFields","mutations","setState","field","data","set","addTodo","newTodo","push","deleteTodo","todoIndex","isCompleted","splice","completeTodo","actions","commit","dispatch","todoInfo","checkStorage","forEach","undefined","saveTodos","all","map","saveToStorage"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\n\nimport ls from './api/localStorageService'\nimport idbs from './api/indexedDBService'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    todos: [],\n    completed: [],\n    dataFields: ['todos', 'completed']\n  },\n  mutations: {\n    setState (state, { field, data }) {\n      Vue.set(state, field, data)\n    },\n    addTodo (state, newTodo) {\n      state.todos.push(newTodo)\n    },\n    deleteTodo (state, { todoIndex, isCompleted }) {\n      if (isCompleted) {\n        state.completed.splice(todoIndex, 1)\n      } else {\n        state.todos.splice(todoIndex, 1)\n      }\n    },\n    completeTodo (state, todoIndex) {\n      state.completed.push(state.todos.splice(todoIndex, 1)[0])\n    }\n  },\n  actions: {\n    addTodo ({ commit, dispatch }, newTodo) {\n      commit('addTodo', newTodo)\n      dispatch('saveTodos')\n    },\n    deleteTodo ({ commit, dispatch }, todoInfo) {\n      commit('deleteTodo', todoInfo)\n      dispatch('saveTodos')\n    },\n    completeTodo ({ commit, dispatch }, todoIndex) {\n      commit('completeTodo', todoIndex)\n      dispatch('saveTodos')\n    },\n    checkStorage ({ state, commit }) {\n      state.dataFields.forEach(async field => {\n        try {\n          let data = await idbs.checkStorage(field)\n\n          // IndexedDB did not find the data, try localStorage\n          if (data === undefined) data = ls.checkStorage(field)\n\n          // LocalStorage did not find the data, reset it\n          if (data === null) data = []\n\n          commit('setState', { field, data })\n        } catch (e) {\n          // The value in storage was invalid or corrupt so just set it to blank\n          commit('setState', { field, data: [] })\n        }\n      })\n    },\n    async saveTodos ({ state }) {\n      try {\n        await Promise.all(state.dataFields.map(field => idbs.saveToStorage(field, state[field])))\n      } catch (e) {\n        state.dataFields.forEach(field => ls.saveToStorage(field, state[field]))\n      }\n    }\n  }\n})\n"]}]}